# generated by nickel/release.ncl; do not manually edit
env:
  CARGO_TERM_COLOR: always
  RUSTDOCFLAGS: --deny warnings
  RUSTFLAGS: --deny warnings
jobs:
  release:
    if: ${{ github.event.pull_request.merged == true }}
    name: release
    runs-on: ubuntu-latest
    steps:
    - name: checkout repo
      uses: actions/checkout@v4
      with:
        submodules: true
    - name: install rust toolchain
      uses: dtolnay/rust-toolchain@master
      with:
        toolchain: stable
    - name: install bevy dependencies
      run: sudo apt-get update && sudo apt-get install --no-install-recommends libasound2-dev libudev-dev libwayland-dev libxkbcommon-dev
      shell: bash
    - name: populated target directory from cache
      uses: Leafwing-Studios/cargo-cache@v2
      with:
        sweep-cache: true
    - env:
        CARGO_REGISTRY_TOKEN: ${{ secrets.CARGO_REGISTRY_TOKEN }}
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      name: run release-plz
      uses: MarcoIeni/release-plz-action@v0.5
      with:
        command: release
name: release
on:
  pull_request:
    branches:
    - '[0-9]+.[0-9]+'
    types:
    - closed
permissions:
  contents: write
  pull-requests: write
